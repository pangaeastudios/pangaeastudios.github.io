<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- APlayer CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css">
    <!-- Local CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/lightbox.min.css">

    <!-- Favicons -->
    <link rel="shortcut icon" href="favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
    <link rel="manifest" href="favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="favicons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>Pangaea Studios</title>
  </head>
  <body class="render-body">
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!-- APlayer Reference-->
    <!-- Local Scripts -->


    <div class="gallery">

    </div>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand music-page-header-logo" href="#">
            <img src="img/ps-logo-waves.svg" alt="">
        </a>
        <h7>PANGAEA STUDIOS</h7>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="music.html">Music</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="films.html">Films</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#">Games <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="photography.html">Photography</a>
            </li>
          </ul>
          <ul class="navbar-nav mr-lg-5">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Collaborators
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="http://pangaeastudios.github.io/basecamp">Basecamp</a>
                  <a class="dropdown-item" href="construction.html">Waves Records</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="construction.html">Our Artists</a>
                </div>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="construction.html">About</a>
              </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
    </nav>
    <script src="js/THREE/three.min.js"></script>
    <script src="js/THREE/GLTFLoader.js"></script>
    <script src="js/THREE/OBJLoader.js"></script>
    <script src="js/THREE/FBXLoader.js"></script>
    <script src="js/THREE/MTLLoader.js"></script>
    <script src="js/THREE/OrbitControls.js"></script>
    <div class="canvas">
        <div class="canvas-text loading-text">
            LOADING 3D SCENE...
        </div>
        <div class="canvas-text navigation-text">
            <a href="games.html">
                BACK TO GAMES PAGE
            </a>
        </div>
        <div class = "render-view" id="container">
            <script type="module">

                import * as THREE from '/js/THREE/three.module.js';
    
                import Stats from '/js/THREE/stats.module.js';
    
                var renderer, scene, camera, stats;
                var pointclouds;
                var raycaster;
                var mouse = new THREE.Vector2();
                var intersection = null;
                var spheres = [];
                var spheresIndex = 0;
                var clock;
    
                var threshold = 0.1;
                var pointSize = 0.05;
                var width = 80;
                var length = 160;
                var rotateY = new THREE.Matrix4().makeRotationY( 0.005 );
    
                init();
                animate();
    
                function generatePointCloudGeometry( color, width, length ) {
    
                    var geometry = new THREE.BufferGeometry();
                    var numPoints = width * length;
    
                    var positions = new Float32Array( numPoints * 3 );
                    var colors = new Float32Array( numPoints * 3 );
    
                    var k = 0;
    
                    for ( var i = 0; i < width; i ++ ) {
    
                        for ( var j = 0; j < length; j ++ ) {
    
                            var u = i / width;
                            var v = j / length;
                            var x = u - 0.5;
                            var y = ( Math.cos( u * Math.PI * 4 ) + Math.sin( v * Math.PI * 8 ) ) / 20;
                            var z = v - 0.5;
    
                            positions[ 3 * k ] = x;
                            positions[ 3 * k + 1 ] = y;
                            positions[ 3 * k + 2 ] = z;
    
                            var intensity = ( y + 0.1 ) * 5;
                            colors[ 3 * k ] = color.r * intensity;
                            colors[ 3 * k + 1 ] = color.g * intensity;
                            colors[ 3 * k + 2 ] = color.b * intensity;
    
                            k ++;
    
                        }
    
                    }
    
                    geometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
                    geometry.setAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );
                    geometry.computeBoundingBox();
    
                    return geometry;
    
                }
    
                function generatePointcloud( color, width, length ) {
    
                    var geometry = generatePointCloudGeometry( color, width, length );
                    var material = new THREE.PointsMaterial( { size: pointSize, vertexColors: true } );
    
                    return new THREE.Points( geometry, material );
    
                }
    
                function generateIndexedPointcloud( color, width, length ) {
    
                    var geometry = generatePointCloudGeometry( color, width, length );
                    var numPoints = width * length;
                    var indices = new Uint16Array( numPoints );
    
                    var k = 0;
    
                    for ( var i = 0; i < width; i ++ ) {
    
                        for ( var j = 0; j < length; j ++ ) {
    
                            indices[ k ] = k;
                            k ++;
    
                        }
    
                    }
    
                    geometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );
    
                    var material = new THREE.PointsMaterial( { size: pointSize, vertexColors: true } );
    
                    return new THREE.Points( geometry, material );
    
                }
    
                function generateIndexedWithOffsetPointcloud( color, width, length ) {
    
                    var geometry = generatePointCloudGeometry( color, width, length );
                    var numPoints = width * length;
                    var indices = new Uint16Array( numPoints );
    
                    var k = 0;
    
                    for ( var i = 0; i < width; i ++ ) {
    
                        for ( var j = 0; j < length; j ++ ) {
    
                            indices[ k ] = k;
                            k ++;
    
                        }
    
                    }
    
                    geometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );
                    geometry.addGroup( 0, indices.length );
    
                    var material = new THREE.PointsMaterial( { size: pointSize, vertexColors: true } );
    
                    return new THREE.Points( geometry, material );
    
                }
    
                function init() {
    
                    var container = document.getElementById( 'container' );
    
                    scene = new THREE.Scene();
    
                    clock = new THREE.Clock();
    
                    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
                    camera.position.set( 10, 10, 10 );
                    camera.lookAt( scene.position );
                    camera.updateMatrix();
    
                    //
    
                    var pcBuffer = generatePointcloud( new THREE.Color( 1, 0, 0 ), width, length );
                    pcBuffer.scale.set( 5, 10, 10 );
                    pcBuffer.position.set( - 5, 0, 0 );
                    scene.add( pcBuffer );
    
                    var pcIndexed = generateIndexedPointcloud( new THREE.Color( 0, 1, 0 ), width, length );
                    pcIndexed.scale.set( 5, 10, 10 );
                    pcIndexed.position.set( 0, 0, 0 );
                    scene.add( pcIndexed );
    
                    var pcIndexedOffset = generateIndexedWithOffsetPointcloud( new THREE.Color( 0, 1, 1 ), width, length );
                    pcIndexedOffset.scale.set( 5, 10, 10 );
                    pcIndexedOffset.position.set( 5, 0, 0 );
                    scene.add( pcIndexedOffset );
    
                    pointclouds = [ pcBuffer, pcIndexed, pcIndexedOffset ];
    
                    //
    
                    var sphereGeometry = new THREE.SphereBufferGeometry( 0.1, 32, 32 );
                    var sphereMaterial = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
    
                    for ( var i = 0; i < 40; i ++ ) {
    
                        var sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );
                        scene.add( sphere );
                        spheres.push( sphere );
    
                    }
    
                    //
    
                    renderer = new THREE.WebGLRenderer( { antialias: true } );
                    renderer.setPixelRatio( window.devicePixelRatio );
                    renderer.setSize( window.innerWidth, window.innerHeight );
                    container.appendChild( renderer.domElement );
    
                    //
    
                    raycaster = new THREE.Raycaster();
                    raycaster.params.Points.threshold = threshold;
    
                    //
    
                    stats = new Stats();
                    container.appendChild( stats.dom );
    
                    //
    
                    window.addEventListener( 'resize', onWindowResize, false );
                    document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                    
                    $(".loading-text").css("font-size","0");
                }
    
                function onDocumentMouseMove( event ) {
    
                    event.preventDefault();
    
                    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
                    mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
    
                }
    
                function onWindowResize() {
    
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
    
                    renderer.setSize( window.innerWidth, window.innerHeight );
    
                }
    
                function animate() {
    
                    requestAnimationFrame( animate );
    
                    render();
                    stats.update();
    
                }
    
                var toggle = 0;
    
                function render() {
    
                    camera.applyMatrix4( rotateY );
                    camera.updateMatrixWorld();
    
                    raycaster.setFromCamera( mouse, camera );
    
                    var intersections = raycaster.intersectObjects( pointclouds );
                    intersection = ( intersections.length ) > 0 ? intersections[ 0 ] : null;
    
                    if ( toggle > 0.02 && intersection !== null ) {
    
                        spheres[ spheresIndex ].position.copy( intersection.point );
                        spheres[ spheresIndex ].scale.set( 1, 1, 1 );
                        spheresIndex = ( spheresIndex + 1 ) % spheres.length;
    
                        toggle = 0;
    
                    }
    
                    for ( var i = 0; i < spheres.length; i ++ ) {
    
                        var sphere = spheres[ i ];
                        sphere.scale.multiplyScalar( 0.98 );
                        sphere.scale.clampScalar( 0.01, 1 );
    
                    }
    
                    toggle += clock.getDelta();
    
                    renderer.render( scene, camera );
    
                }
    
            </script>
        </div>
    </div>
    

    <div id="aplayer"></div>

</body>
</html>